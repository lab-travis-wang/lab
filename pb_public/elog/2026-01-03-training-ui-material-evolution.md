# 训练过程 UI 优化 - 突出素材演变记录

> created_at: 2026-01-03T11:42:00+08:00
> related_tasks: ["001-ui-training-evolution"]

## 任务需求

优化 `TrainingView` 组件，让训练过程中**素材的变化**成为 UI 的核心。

核心问题：
- 原 UI 把素材藏在顶部窄条，用户感知不到"素材如何被训练加工"
- 素材的演变（原始素材 → 补充细节 → 能力提升）应该被可视化

## 实施过程

### 1. 设计左侧"素材演变面板"

**桌面端布局：**
- 左侧固定 320px 面板，显示素材演变过程
- 右侧是对话区域

**面板内容结构：**
```
┌─────────────────────────────────┐
│  素材演变记录                    │ ← 标题
│  你的每一次回答都在丰富这个素材   │ ← 副标题
├─────────────────────────────────┤
│  ┌───────────────────────────┐  │
│  │  0️⃣ 原始素材              │  │
│  │  "小时候我的门牙要掉了..." │  │
│  └───────────────────────────┘  │
│            ↓                    │ ← 演变箭头
│  ┌───────────────────────────┐  │
│  │  1️⃣ 补充细节 (action)    │  │ ← 用户回答自动记录
│  │  "他是笑着说的..."        │  │
│  └───────────────────────────┘  │
│            ↓                    │
│  ┌───────────────────────────┐  │
│  │  2️⃣ 补充细节 (emotion)   │  │
│  │  "我的门牙掉下来时..."    │  │
│  └───────────────────────────┘  │
├─────────────────────────────────┤
│  当前素材状态                    │ ← 底部预览
│  原始 + 2个细节                  │
└─────────────────────────────────┘
```

### 2. 代码实现

**状态定义：**
```typescript
interface EnrichedDetail {
  question: string;
  answer: string;
  category: 'scene' | 'action' | 'emotion' | 'dialogue' | '人物特点';
}

const [enrichedDetails, setEnrichedDetails] = useState<EnrichedDetail[]>([]);
```

**用户回答时自动记录：**
```typescript
if (currentMsg?.type === 'training') {
  setEnrichedDetails(prev => [...prev, {
    question: currentMsg.content.split('\n').slice(3).join('\n').trim(),
    answer: input,
    category: 'action'
  }]);
}
```

**移动端适配：**
- 左侧面板默认隐藏
- 顶部显示原始素材 + 已补充细节计数

## 关键改进点

1. **可视化演变**：用户清晰看到从"一句话"到"多维度细节"的增量
2. **编号追踪**：每个细节有编号 (1, 2, 3...)，强化"这是我的进步"的感知
3. **颜色区分**：
   - 灰色：原始素材 (Step 0)
   - 绿色：用户补充的细节 (Step 1-N)
   - 琥珀色：底部当前状态预览
4. **情感激励**："你的每一次回答都在丰富这个素材" - 强调用户的主体性

## 验证

```bash
cd 001 && npm run lint    # 通过
npx tsc --noEmit          # 通过
```

## 成果产出

- `001/src/components/TrainingView.tsx` - 重写 UI 布局，添加素材演变面板
